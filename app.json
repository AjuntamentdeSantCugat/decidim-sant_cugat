{
  "name": "decidim_sant_cugat",
  "description": "decidim_sant_cugat - Direct and participatory democracy web platform based on Decidim framework",
  "keywords": [],
  "stack": "heroku-20",
  "buildpacks": [
    {
      "url": "https://github.com/gaffneyc/heroku-buildpack-jemalloc"
    },
    {
      "url": "heroku/nodejs"
    },
    {
      "url": "heroku/ruby"
    }
  ],
  "addons": [
    "heroku-postgresql:hobby-dev",
    "heroku-redis:hobby-dev",
    "logentries:le_tryit",
    "memcachedcloud:30",
    "newrelic:wayne",
    "sendgrid:starter"
  ],
  "scripts": {
    "postdeploy":"rake db:schema:load db:migrate db:seed"
  },
  "env": {
    "AWS_ACCESS_KEY_ID": {
      "required": true
    },
    "AWS_SECRET_ACCESS_KEY": {
      "required": true
    },
    "CENSUS_PASSWORD": {
      "description": "Password for a custom CensusAuthenticationHandler, if needed",
      "required": false
    },
    "CENSUS_URL": {
      "description": "URL for a custom CensusAuthenticationHandler, if needed",
      "required": false
    },
    "CENSUS_USERNAME": {
      "description": "Username for a custom CensusAuthenticationHandler, if needed",
      "required": false
    },
    "HERE_API_KEY": {
      "required": false
    },
    "HEROKU_APP_NAME": {
      "description": "Needed for review apps",
      "required": false
    },
    "SECRET_KEY_BASE": {
      "description": "A secret used by Rails to identify sessions",
      "generator": "secret"
    }
  },
  "cron": [
    {
      "command": "bundle exec rake decidim:open_data:export",
      "schedule": "0 1 * * *"
    },
    {
      "command": "bundle exec rake decidim:metrics:all",
      "schedule": "0 3 * * *"
    }
  ],
  "scripts": {
    "dokku": {
      "postdeploy": "bundle exec rake db:migrate"
    }
  }
}
